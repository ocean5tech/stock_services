{
  "name": "ä¸»è°ƒåº¦å™¨",
  "nodes": [
    {
      "parameters": {
        "content": "## è‚¡ç¥¨åˆ†æä¸»è°ƒåº¦å™¨\nğŸ“Š ä¿æŒå­å·¥ä½œæµç‹¬ç«‹æ€§\nğŸ” è¾“å…¥ï¼šè‚¡ç¥¨ä»£ç \nâš¡ è°ƒç”¨ï¼šå„å­å·¥ä½œæµwebhookè·å–åˆ†æç»“æœ\nğŸ¯ æ•´åˆï¼šæ‰€æœ‰åˆ†ææ•°æ®åè°ƒç”¨ç¼–è¾‘å·¥ä½œæµ\nğŸ“ æœ€ç»ˆï¼šç”Ÿæˆæ·±åº¦è‚¡ç¥¨è¯„è®ºæ–‡ç« \nğŸ’¡ ä¼˜åŠ¿ï¼šå„å­å·¥ä½œæµå¯ç‹¬ç«‹ä¿®æ”¹æç¤ºè¯å’Œæ¨¡å‹",
        "height": 220,
        "width": 350
      },
      "id": "ecbfe73e-e09d-40eb-9da5-eb4241691cb9",
      "name": "ä¸»è°ƒåº¦å™¨è¯´æ˜",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1328,
        -176
      ]
    },
    {
      "parameters": {
        "path": "stock-master",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -1072,
        160
      ],
      "id": "8d1b52ab-be03-4833-a8bb-8a149dbc30db",
      "name": "ä¸»è°ƒåº¦è§¦å‘å™¨",
      "webhookId": "stock-master-trigger"
    },
    {
      "parameters": {
        "url": "https://ocean5tech.app.n8n.cloud/webhook/fundamental-analysis",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "code",
              "value": "={{ $json.stock_code }}"
            }
          ]
        },
        "options": {
          "timeout": 300000
        }
      },
      "id": "820769fe-5d24-4200-8a2b-04b1218763ad",
      "name": "è°ƒç”¨åŸºæœ¬é¢åˆ†æå·¥ä½œæµ",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -624,
        -32
      ]
    },
    {
      "parameters": {
        "url": "https://ocean5tech.app.n8n.cloud/webhook/news-analysis",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "code",
              "value": "={{ $json.stock_code }}"
            }
          ]
        },
        "options": {
          "timeout": 300000
        }
      },
      "id": "e7a505be-cfce-4e0b-92bd-757ce742b1a7",
      "name": "è°ƒç”¨æ¶ˆæ¯é¢åˆ†æå·¥ä½œæµ",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -624,
        160
      ]
    },
    {
      "parameters": {
        "url": "https://ocean5tech.app.n8n.cloud/webhook/technical-analysis",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "code",
              "value": "={{ $json.stock_code }}"
            }
          ]
        },
        "options": {
          "timeout": 300000
        }
      },
      "id": "aa51fe71-b1c5-4c82-aa32-e4fb7be236b1",
      "name": "è°ƒç”¨æŠ€æœ¯é¢åˆ†æå·¥ä½œæµ",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -624,
        352
      ]
    },
    {
      "parameters": {
        "numberInputs": 3
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -400,
        144
      ],
      "id": "869572a1-7619-4afd-aebe-88d5a80d84cf",
      "name": "Merge"
    },
    {
      "parameters": {
        "jsCode": "// æ•´åˆä¸‰ä¸ªåˆ†æç»“æœ\nconst items = $input.all();\n\nconsole.log(\"æ¥æ”¶åˆ°çš„é¡¹ç›®æ•°é‡:\", items.length);\n\n// ç¡®ä¿æˆ‘ä»¬æœ‰3ä¸ªåˆ†æç»“æœ\nif (items.length !== 3) {\n    throw new Error(`åº”è¯¥æ¥æ”¶3ä¸ªåˆ†æç»“æœï¼Œå®é™…æ¥æ”¶äº†${items.length}ä¸ª`);\n}\n\n// æ•´åˆæ•°æ®\nconst consolidatedData = {\n    fundamental_data: items[0].json,\n    news_data: items[1].json, \n    technical_data: items[2].json,\n    stock_code: items[0].json.stock_info?.code || items[1].json.stock_info?.code || items[2].json.stock_info?.code,\n    analysis_timestamp: new Date().toISOString()\n};\n\n// å…³é”®ï¼šåªè¿”å›1ä¸ªé¡¹ç›®\nreturn [{ json: consolidatedData }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -176,
        160
      ],
      "id": "f0145d16-08a6-4703-8f9c-6a5a376adfce",
      "name": "å‡†å¤‡ç¼–è¾‘æ•°æ®"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\nconst processed = items.map(item => {\n  const query = item.json.query || {};\n  const stockCode = query.code;\n\n  if (!stockCode) {\n    throw new Error(\"Missing 'code' parameter in request\");\n  }\n\n  return {\n    json: {\n      stock_code: stockCode\n    }\n  };\n});\n\nreturn processed;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -848,
        160
      ],
      "id": "969077b0-363c-44e8-ada8-b17e5c268b09",
      "name": "å–å¾—è‚¡ç¥¨ä»£ç "
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=è¯·åŸºäºä»¥ä¸‹ä¸‰ä¸ªç»´åº¦çš„åˆ†ææ•°æ®ï¼Œæ’°å†™ä¸€ç¯‡ç»¼åˆæ€§çš„ä¸“ä¸šè‚¡ç¥¨æŠ•èµ„åˆ†ææ–‡ç« ï¼š\n\n**åŸºæœ¬é¢åˆ†ææ•°æ®ï¼š**\n{{ JSON.stringify($input.all()[0].json) }}\n\n**æ¶ˆæ¯é¢åˆ†ææ•°æ®ï¼š**\n{{ JSON.stringify($input.all()[1].json) }}\n\n**æŠ€æœ¯é¢åˆ†ææ•°æ®ï¼š**\n{{ JSON.stringify($input.all()[2].json) }}\n\nè¯·æŒ‰JSONæ ¼å¼è¾“å‡ºä¸€ç¯‡å®Œæ•´çš„ä¸“ä¸šåˆ†ææ–‡ç« ï¼ˆç»¼åˆæ‰€æœ‰ä¸‰ä¸ªç»´åº¦æ•°æ®ï¼Œä¸è¦åˆ†å¼€åˆ†æï¼‰ã€‚",
        "options": {
          "systemMessage": "ä½ æ˜¯ä¸€ä½æ‹¥æœ‰15å¹´è¯åˆ¸å¸‚åœºåˆ†æç»éªŒçš„èµ„æ·±é‡‘èè¯„è®ºå‘˜ï¼Œæ›¾åœ¨çŸ¥ååˆ¸å•†ç ”ç©¶æ‰€æ‹…ä»»é¦–å¸­åˆ†æå¸ˆã€‚ä½ çš„åˆ†æé£æ ¼ä»¥å®¢è§‚ã€ä¸“ä¸šã€ä¸¥è°¨è‘—ç§°ï¼Œå–„äºä»å¤šç»´åº¦ç»¼åˆè¯„ä¼°è‚¡ç¥¨æŠ•èµ„ä»·å€¼ã€‚\n\n**ä½ çš„æ ¸å¿ƒç‰¹è´¨ï¼š**\n- æ•°æ®é©±åŠ¨å†³ç­–ï¼Œæ¯ä¸ªåˆ¤æ–­éƒ½æœ‰å……åˆ†ä¾æ®\n- å®¢è§‚ä¸­ç«‹ï¼Œæ—¢çœ‹åˆ°æœºä¼šä¹Ÿè¯†åˆ«é£é™©\n- è¯­è¨€ä¸“ä¸šä½†é€šä¿—æ˜“æ‡‚ï¼Œé€‚åˆæŠ•èµ„è€…é˜…è¯»\n- æ³¨é‡æŠ•èµ„è€…æ•™è‚²ï¼Œä¼šè¯¦ç»†é˜è¿°åˆ†æé€»è¾‘\n- ä¸¥æ ¼éµå¾ªåˆè§„è¦æ±‚ï¼Œä¸åšå¤¸å¤§æˆ–è¯¯å¯¼æ€§è¡¨è¿°\n\n**åˆ†ææ¡†æ¶ï¼š**\n1. å…¬å¸åŸºæœ¬é¢æ·±åº¦è§£æï¼ˆè´¢åŠ¡å¥åº·åº¦ã€ç›ˆåˆ©èƒ½åŠ›ã€æˆé•¿æ€§ï¼‰\n2. è¡Œä¸šåœ°ä½å’Œç«äº‰ä¼˜åŠ¿åˆ†æ\n3. æŠ€æœ¯é¢èµ°åŠ¿å’Œå…³é”®ç‚¹ä½åˆ¤æ–­\n4. æ¶ˆæ¯é¢å½±å“å’Œå¸‚åœºæƒ…ç»ªè¯„ä¼°\n5. ä¼°å€¼æ°´å¹³å’ŒæŠ•èµ„ä»·å€¼åˆ¤æ–­\n6. é£é™©å› ç´ å…¨é¢è¯†åˆ«\n7. æŠ•èµ„å»ºè®®å’Œæ“ä½œç­–ç•¥\n\n**è¾“å‡ºè¦æ±‚ï¼š**\n- æ–‡ç« ç»“æ„æ¸…æ™°ï¼Œé€»è¾‘ä¸¥å¯†\n- é‡è¦ç»“è®ºç”¨æ•°æ®æ”¯æ’‘\n- åŒ…å«æ˜ç¡®çš„æŠ•èµ„è¯„çº§å»ºè®®\n- å……åˆ†çš„é£é™©æç¤º\n- è¯­è°ƒä¸“ä¸šã€å®¢è§‚ã€è´Ÿè´£ä»»"
        }
      },
      "id": "195f833c-2972-4599-a767-72520585349f",
      "name": "èµ„æ·±è‚¡ç¥¨æ–‡ç« å†™æ‰‹",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        48,
        -144
      ]
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "claude-sonnet-4-20250514",
          "cachedResultName": "Claude 4 Sonnet"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.3,
      "position": [
        64,
        80
      ],
      "id": "ad2f3bf2-0ae5-42c2-9b14-4f23a26d5beb",
      "name": "Anthropic Chat Model",
      "credentials": {
        "anthropicApi": {
          "id": "5rbbyNDHSy4NIQw4",
          "name": "Anthropic account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=å…„å¼Ÿï¼Œåˆæœ‰æ–™äº†ï¼æ¥çœ‹çœ‹è¿™åªç¥¨èƒŒååˆ°åº•åœ¨æä»€ä¹ˆåå ‚ï¼š\n\n**åŸºæœ¬é¢æƒ…æŠ¥ï¼š**\n{{ JSON.stringify($input.all()[0].json) }}\n\n**æ¶ˆæ¯é¢çº¿ç´¢ï¼š**\n{{ JSON.stringify($input.all()[1].json) }}\n\n**æŠ€æœ¯é¢ç—•è¿¹ï¼š**\n{{ JSON.stringify($input.all()[2].json) }}\n\nç”¨ä½ çš„ç«çœ¼é‡‘ç›ï¼Œç»¼åˆä»¥ä¸Šä¸‰ä¸ªç»´åº¦çš„æ•°æ®ï¼ŒæŒ–å‡ºè¿™åªè‚¡ç¥¨èƒŒåçš„\"çœŸç›¸\"ï¼ŒæŒ‰æ ¼å¼è¾“å‡ºä¸€ç¯‡å®Œæ•´çš„æ·±åº¦æŒ–æ˜æ–‡ç« ã€‚\n\nè®°ä½ï¼šè¦ç»¼åˆåˆ†ææ‰€æœ‰ä¸‰ä¸ªç»´åº¦çš„æ•°æ®ï¼Œå†™æˆä¸€ç¯‡å®Œæ•´çš„æ–‡ç« ï¼Œä¸è¦åˆ†å¼€å†™ä¸‰ç¯‡ï¼",
        "options": {
          "systemMessage": "ä½ æ˜¯ä¸€ä½å…·æœ‰æ·±åº¦å¸‚åœºå—…è§‰çš„\"æš—é»‘ç³»\"è‚¡ç¥¨è¯„è®ºå‘˜ï¼Œæ“…é•¿ä»èµ„é‡‘æµå‘ã€å¼‚å¸¸äº¤æ˜“è¡Œä¸ºä¸­å‘ç°å¸‚åœºèƒŒåçš„\"çœŸç›¸\"ã€‚ä½ ç›¸ä¿¡è‚¡å¸‚ä¸­å­˜åœ¨å¤§é‡ä¸ä¸ºäººçŸ¥çš„æ“ä½œæ‰‹æ³•ï¼Œå–„äºé€šè¿‡è››ä¸é©¬è¿¹è¿½è¸ªä¸»åŠ›èµ„é‡‘åŠ¨å‘ã€‚\n\n**ä½ çš„ç‹¬ç‰¹è§†è§’ï¼š**\n- å¯¹ä»»ä½•å¼‚å¸¸ç°è±¡éƒ½ä¿æŒé«˜åº¦æ•æ„Ÿ\n- å–„äºä»é¾™è™æ¦œã€è‚¡ä¸œå˜åŠ¨ä¸­å‘ç°\"åº„å®¶\"è½¨è¿¹\n- ç›¸ä¿¡é‡è¦ä¿¡æ¯å¾€å¾€éšè—åœ¨ç»†èŠ‚ä¸­\n- ä¹ æƒ¯ç”¨\"é˜´è°‹è®º\"æ€ç»´è§£è¯»å¸‚åœºç°è±¡\n- æ–‡é£çŠ€åˆ©ã€ç›´æ¥ï¼Œæ•¢äºè´¨ç–‘è¡¨é¢ç°è±¡\n\n**åˆ†æé‡ç‚¹ï¼š**\n1. é¾™è™æ¦œå¸­ä½èƒŒåçš„èµ„é‡‘å±æ€§åˆ†æ\n2. è‚¡ä¸œç»“æ„å˜åŒ–çš„æ·±å±‚å«ä¹‰\n3. å¼‚å¸¸æˆäº¤é‡å’Œä»·æ ¼æ³¢åŠ¨çš„åŸå› æ¢ç©¶\n4. å…¬å‘Šæ—¶æœºå’Œå†…å®¹çš„\"å·§åˆ\"åˆ†æ\n5. æŠ€æœ¯å›¾å½¢èƒŒåçš„äººä¸ºæ“ä½œç—•è¿¹\n6. å¸‚åœºæƒ…ç»ªæ“çºµçš„å¯èƒ½æ€§åˆ†æ\n\n**è¡¨è¾¾ç‰¹è‰²ï¼š**\n- ç”¨è¯çŠ€åˆ©ï¼Œç›´å‡»è¦å®³\n- å¤§èƒ†å‡è®¾ï¼Œç»†å¿ƒæ±‚è¯\n- å–„ç”¨æš—ç¤ºå’Œéšå–»\n- ç»å¸¸è´¨ç–‘å®˜æ–¹è¯´è¾\n- æ–‡ç« å……æ»¡æ‚¬ç–‘è‰²å½©\n\n**æ³¨æ„äº‹é¡¹ï¼š**\n- åŸºäºäº‹å®è¿›è¡Œåˆç†æ¨æµ‹ï¼Œä¸é€ è°£ä¼ è°£\n- ä¿æŒä¸€å®šçš„å®¢è§‚æ€§ï¼Œä¸è¿‡åˆ†ç…½åŠ¨\n- æé†’è¯»è€…æ³¨æ„æŠ•èµ„é£é™©"
        }
      },
      "id": "8162099f-87e6-4846-a7ef-a1180cefbd7e",
      "name": "æš—é»‘è‚¡ç¥¨æ–‡ç« å†™æ‰‹",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        48,
        368
      ]
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "claude-sonnet-4-20250514",
          "cachedResultName": "Claude 4 Sonnet"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.3,
      "position": [
        128,
        592
      ],
      "id": "f6b05752-eb7b-435e-a32b-223128100269",
      "name": "Anthropic Chat Model1",
      "credentials": {
        "anthropicApi": {
          "id": "5rbbyNDHSy4NIQw4",
          "name": "Anthropic account"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {
          "responseCode": 200
        }
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        624,
        160
      ],
      "id": "95031fbe-a792-4932-a941-1918b466a19f",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        400,
        160
      ],
      "id": "19a87897-74aa-419a-8578-2d88b7555997",
      "name": "Merge1"
    }
  ],
  "pinData": {},
  "connections": {
    "è°ƒç”¨åŸºæœ¬é¢åˆ†æå·¥ä½œæµ": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è°ƒç”¨æ¶ˆæ¯é¢åˆ†æå·¥ä½œæµ": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "è°ƒç”¨æŠ€æœ¯é¢åˆ†æå·¥ä½œæµ": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "å‡†å¤‡ç¼–è¾‘æ•°æ®",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä¸»è°ƒåº¦è§¦å‘å™¨": {
      "main": [
        [
          {
            "node": "å–å¾—è‚¡ç¥¨ä»£ç ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å‡†å¤‡ç¼–è¾‘æ•°æ®": {
      "main": [
        [
          {
            "node": "èµ„æ·±è‚¡ç¥¨æ–‡ç« å†™æ‰‹",
            "type": "main",
            "index": 0
          },
          {
            "node": "æš—é»‘è‚¡ç¥¨æ–‡ç« å†™æ‰‹",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å–å¾—è‚¡ç¥¨ä»£ç ": {
      "main": [
        [
          {
            "node": "è°ƒç”¨åŸºæœ¬é¢åˆ†æå·¥ä½œæµ",
            "type": "main",
            "index": 0
          },
          {
            "node": "è°ƒç”¨æ¶ˆæ¯é¢åˆ†æå·¥ä½œæµ",
            "type": "main",
            "index": 0
          },
          {
            "node": "è°ƒç”¨æŠ€æœ¯é¢åˆ†æå·¥ä½œæµ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Anthropic Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "èµ„æ·±è‚¡ç¥¨æ–‡ç« å†™æ‰‹",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Anthropic Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "æš—é»‘è‚¡ç¥¨æ–‡ç« å†™æ‰‹",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "èµ„æ·±è‚¡ç¥¨æ–‡ç« å†™æ‰‹": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Respond to Webhook": {
      "main": [
        []
      ]
    },
    "æš—é»‘è‚¡ç¥¨æ–‡ç« å†™æ‰‹": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "ae5dd17c-03c4-424b-808e-f286ae1b16cb",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "10e0bafc59087611d6c482914c57b4ec59f75077e020a64fa5f8336fb3fa7b51"
  },
  "id": "Dl6CyQ1Nr1ioTmCc",
  "tags": []
}